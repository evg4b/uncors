UNCORS provides multiple installation methods to suit different development environments and preferences. Choose the method that best fits your workflow.

# Package Managers

## Homebrew (macOS | Linux)

For macOS or Linux users with [Homebrew](https://brew.sh/) installed, UNCORS can be installed using the following command:

```bash
brew install evg4b/tap/uncors
```

## Scoop (Windows)

Windows users with [Scoop](https://scoop.sh/) can install UNCORS using these commands:

```bash
scoop bucket add evg4b https://github.com/evg4b/scoop-bucket.git
scoop install evg4b/uncors
```

## NPM (Cross-platform)

UNCORS can be installed as a Node.js package using your preferred package manager:

**Using npm:**

```bash
npm install uncors --save-dev
```

**Using yarn:**

```bash
yarn add uncors --dev
```

**Using pnpm:**

```bash
pnpm add -D uncors
```

## Docker (Cross-platform)

Docker images are available on [Docker Hub](https://hub.docker.com/r/evg4b/uncors):

```bash
docker run -p 80:3000 evg4b/uncors --from 'http://local.github.com' --to 'https://github.com'
```

# Binary Installation

## Stew (Cross-platform)

For users of [Stew](https://github.com/marwanhawari/stew) package manager, install UNCORS with:

```bash
stew install evg4b/uncors
```

## Direct Binary Download (Cross-platform)

Pre-compiled binaries are available for all major platforms on the [UNCORS releases page](https://github.com/evg4b/uncors/releases/latest).

**Installation steps:**

1. Download the appropriate binary for your operating system and architecture
2. Extract the binary to your preferred location
3. (Optional) Add the binary to your `PATH` for convenient access

**Recommended installation paths:**

- **Linux/macOS:** `/usr/local/bin`
- **Windows:** Add to a directory included in your system's PATH environment variable

The binary is self-contained and can be executed from any location without additional dependencies.

# Build from Source

**Prerequisites:**

- [Git](https://git-scm.com/)
- [Go](https://go.dev/) 1.21 or later

**Build instructions:**

```bash
# Clone the repository
git clone https://github.com/evg4b/uncors.git
cd uncors

# Build and install
go install -tags release
```

# Post-Installation: Hosts File Setup

UNCORS works by mapping local domains to remote servers. To use UNCORS effectively, you need to configure your system's hosts file to resolve custom domain names to localhost.

## Understanding the Hosts File

The hosts file is a system file that maps hostnames to IP addresses. UNCORS listens on localhost and requires entries in your hosts file to route traffic through it.

## Configuration Steps

### macOS and Linux

**1. Open the hosts file with root privileges:**

```bash
sudo nano /etc/hosts
```

Or use your preferred editor:

```bash
sudo vim /etc/hosts
# or
sudo vi /etc/hosts
```

**2. Add your domain mappings:**

Add lines mapping your custom domains to localhost (127.0.0.1):

```
127.0.0.1 api.local
127.0.0.1 app.local
127.0.0.1 admin.local
```

**3. Save and exit:**

- In nano: Press `Ctrl+O` to save, then `Ctrl+X` to exit
- In vim: Press `Esc`, type `:wq`, then press `Enter`

**4. Verify the configuration:**

```bash
ping api.local
# Should respond from 127.0.0.1
```

**Quick one-liner:**

```bash
echo "127.0.0.1 api.local" | sudo tee -a /etc/hosts
```

### Windows

**1. Run Notepad as Administrator:**

- Press `Win` key
- Type "Notepad"
- Right-click on "Notepad" and select "Run as administrator"

**2. Open the hosts file:**

- In Notepad, click File → Open
- Navigate to: `C:\Windows\System32\drivers\etc`
- Change file filter from "Text Documents (*.txt)" to "All Files (*.*)"
- Select `hosts` and click Open

**3. Add your domain mappings:**

Add lines at the end of the file:

```
127.0.0.1 api.local
127.0.0.1 app.local
127.0.0.1 admin.local
```

**4. Save the file:**

- Click File → Save
- If you get an access denied error, make sure you opened Notepad as Administrator

**5. Verify the configuration:**

Open Command Prompt and run:

```cmd
ping api.local
```

Should respond from 127.0.0.1

### Alternative: PowerShell (Windows)

Run PowerShell as Administrator and execute:

```powershell
Add-Content -Path C:\Windows\System32\drivers\etc\hosts -Value "`n127.0.0.1 api.local"
```

## Common Domain Patterns

Here are common domain naming patterns for different use cases:

```
# API development
127.0.0.1 api.local
127.0.0.1 api.dev
127.0.0.1 local.api.com

# Frontend development
127.0.0.1 app.local
127.0.0.1 frontend.local

# Microservices
127.0.0.1 auth.local
127.0.0.1 users.local
127.0.0.1 payments.local

# Wildcard support (requires DNS server)
# Note: Hosts file does NOT support wildcards
# Each subdomain must be listed explicitly
127.0.0.1 sub1.local.com
127.0.0.1 sub2.local.com
```

> [!WARNING]
> The hosts file does not support wildcard entries like `*.local.com`. Each subdomain must be listed individually. However, UNCORS configuration supports wildcard mappings (e.g., `http://*.local.com:8080` → `https://*.example.com`) for domains explicitly listed in your hosts file.

## Troubleshooting

### Changes not taking effect

**macOS/Linux:**
```bash
# Flush DNS cache
sudo dscacheutil -flushcache  # macOS
sudo systemctl restart systemd-resolved  # Linux (systemd)
```

**Windows:**
```cmd
ipconfig /flushdns
```

### Permission denied

- Ensure you're running your editor with administrator/root privileges
- On Unix systems, use `sudo`
- On Windows, right-click and "Run as administrator"

### Ping fails or wrong IP

- Check for typos in the hosts file
- Ensure there are no duplicate entries
- Verify no extra spaces or tabs
- Make sure you're using 127.0.0.1 (not 127.0.0.0 or other addresses)

### Browser not resolving domain

- Clear your browser's DNS cache:
  - Chrome: Visit `chrome://net-internals/#dns` and click "Clear host cache"
  - Firefox: Restart the browser
  - Safari: Close all windows and restart

## Security Considerations

> [!CAUTION]
> Modifying the hosts file can affect your system's network behavior. Only add entries for domains you control or are using for local development. Never add entries for production domains you don't own, as this could interfere with legitimate services.

**Best practices:**

1. Use `.local` or `.dev` TLDs for development
2. Document your hosts file changes
3. Remove entries when you're done with a project
4. Never commit hosts file changes to version control

## Next Steps

Once your hosts file is configured:

1. Create an UNCORS configuration file (see [Configuration](./2.-Configuration))
2. Start UNCORS: `uncors --config .uncors.yaml`
3. Access your mapped domains through your browser or API client
