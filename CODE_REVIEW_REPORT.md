# UNCORS - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –∞–Ω–∞–ª–∏–∑–µ –∫–æ–¥–∞

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-10-22
**–ü—Ä–æ–µ–∫—Ç:** UNCORS - HTTP/HTTPS –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
**–Ø–∑—ã–∫:** Go 1.24.1
**–û–±—â–∏–π –æ–±—ä–µ–º –∫–æ–¥–∞:** ~22,000 —Å—Ç—Ä–æ–∫ Go –∫–æ–¥–∞
**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** 72 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–†–µ–∑—é–º–µ](#—Ä–µ–∑—é–º–µ)
2. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
3. [–í–∞–∂–Ω—ã–µ –Ω–µ–¥–æ—á–µ—Ç—ã](#–≤–∞–∂–Ω—ã–µ-–Ω–µ–¥–æ—á–µ—Ç—ã)
4. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ —É–ª—É—á—à–µ–Ω–∏—é](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–∫-—É–ª—É—á—à–µ–Ω–∏—é)
5. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π-–¥–æ–ª–≥)
6. [–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π](#–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞-–æ—Ç-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)
7. [–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π](#–ø–ª–∞–Ω-–¥–µ–π—Å—Ç–≤–∏–π)

---

## –†–µ–∑—é–º–µ

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞: **7.5/10** (–•–æ—Ä–æ—à–æ, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã)

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∞:**
- –û—Ç–ª–∏—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π
- –•–æ—Ä–æ—à–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Options, Middleware Chain, Factory)
- –°–æ–ª–∏–¥–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (72 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞)
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- –ß—ë—Ç–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- **31 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `panic()`** - –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —Ö—Ä—É–ø–∫–∏–º –∏ —Å–∫–ª–æ–Ω–Ω—ã–º –∫ –∞–≤–∞—Ä–∏–π–Ω–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é
- –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ (`unsafe.Pointer`)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- –ü—Ä–æ–ø—É—Å–∫–∏ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫ (silent failures)
- –û–ø–µ—á–∞—Ç–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –æ–± –æ—à–∏–±–∫–∞—Ö
- –ù–µ–ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. üî¥ –ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `panic()` (–ö—Ä–∏—Ç–∏—á–Ω–æ)

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 31 –≤—ã–∑–æ–≤ `panic()` –≤ –∫–æ–¥–µ
**Severity:** HIGH

#### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞:

**1.1. Panic –≤ middleware (cache/middleware.go)**

```go
// –§–∞–π–ª: internal/handler/cache/middleware.go:78
if _, err := writer.Write(cachedResponse.Body); err != nil {
    panic(err)  // ‚ö†Ô∏è –ú–æ–∂–µ—Ç –∑–∞–≤–∞–ª–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
}

// –§–∞–π–ª: internal/handler/cache/middleware.go:87
if err := doublestar.PathMatch(pattern, request.URL.Path); err != nil {
    panic(err)  // ‚ö†Ô∏è –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥-–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã
}
```

**–†–∏—Å–∫:** –ê–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**1.2. Panic –≤ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (uncors/app.go:81)**

```go
err := app.internalShutdown(ctx)
if err != nil {
    panic(err) // TODO: refactor this error handling
}
```

**–†–∏—Å–∫:** –ù–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã–π —Å–±–æ–π –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**1.3. Misleading function naming (helpers/closer.go)**

```go
func CloseSafe(resource io.Closer) {
    if err := resource.Close(); err != nil {
        panic(err)  // ‚ö†Ô∏è –ù–∞–∑–≤–∞–Ω–∏–µ "Safe" –≤–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ!
    }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `CloseSafe` –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É - —ç—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –µ—ë –∏–º–µ–Ω–∏.

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ panic –≤ middleware –Ω–∞ graceful error handling:

```go
// –ë—ã–ª–æ:
if _, err := writer.Write(cachedResponse.Body); err != nil {
    panic(err)
}

// –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
if _, err := writer.Write(cachedResponse.Body); err != nil {
    m.logger.Errorf("failed to write cached response: %v", err)
    // Fallback: proxy to real backend
    next.ServeHTTP(writer, request)
    return
}
```

**–î–ª—è CloseSafe:**
1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ `CloseMust()` –∏–ª–∏ `ClosePanic()`
2. –ò–õ–ò –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –±–µ–∑ panic

---

### 2. üî¥ Unsafe Pointer –æ–ø–µ—Ä–∞—Ü–∏–∏ (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–§–∞–π–ª:** `internal/helpers/asset.go:9`

```go
func AssertIsDefined(value any, message ...string) {
    if (*[2]uintptr)(unsafe.Pointer(&value))[1] == 0 {  // ‚ö†Ô∏è –•—Ä—É–ø–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
        panic(message)
    }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ Go
- –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö Go
- –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —Å–ª–æ–∂–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `reflect` –ø–∞–∫–µ—Ç:

```go
func AssertIsDefined(value any, message ...string) {
    v := reflect.ValueOf(value)
    if !v.IsValid() || v.IsZero() {
        message := strings.Join(message, " ")
        if len(message) == 0 {
            message = "Required variable is not defined"
        }
        panic(message)
    }
}
```

---

### 3. üü° –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∫–æ–ª–ª–∏–∑–∏—è –∫—ç—à-–∫–ª—é—á–µ–π (cache key collision)

**–§–∞–π–ª:** `internal/handler/cache/middleware.go:105`

```go
func (m *Middleware) extractCacheKey(method string, url *url.URL) string {
    // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç url.Hostname() –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è URL –±–µ–∑ —Ö–æ—Å—Ç–∞
    return helpers.Sprintf("[%s]%s%s?%s", method, url.Hostname(), ...)
}
```

**–†–∏—Å–∫:** –†–∞–∑–Ω—ã–µ URL –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫—ç—à-–∫–ª—é—á:
- `GET http://host1.com/api?a=1`
- `GET http://host2.com/api?a=1`

–û–±–∞ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–ª—é—á, –µ—Å–ª–∏ hostname –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π URL –∏–ª–∏ —É–ª—É—á—à–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ hostname:

```go
func (m *Middleware) extractCacheKey(method string, url *url.URL) string {
    host := url.Host
    if host == "" {
        host = url.Hostname()
    }

    values := url.Query()
    // ... rest of the code

    return helpers.Sprintf("[%s]%s%s?%s", method, host, url.Path, strings.Join(items, ";"))
}
```

---

## –í–∞–∂–Ω—ã–µ –Ω–µ–¥–æ—á–µ—Ç—ã

### 4. üü° –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

#### 4.1. HTTP Address Getter –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `internal/uncors/app.go`

```go
func (app *App) HTTPAddr() net.Addr {
    app.serversMutex.RLock()
    defer app.serversMutex.RUnlock()
    for _, portSrv := range app.servers {
        if portSrv.scheme == "http" {  // –¢–æ–ª—å–∫–æ —ç—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è
            // ... ~15 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ ...
        }
    }
    return nil
}

func (app *App) HTTPSAddr() net.Addr {
    app.serversMutex.RLock()
    defer app.serversMutex.RUnlock()
    for _, portSrv := range app.servers {
        if portSrv.scheme == "https" {  // –¢–æ–ª—å–∫–æ —ç—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è
            // ... ~15 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ ...
        }
    }
    return nil
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

–ò–∑–≤–ª–µ—á—å –æ–±—â—É—é –ª–æ–≥–∏–∫—É:

```go
func (app *App) getListenerAddrByScheme(scheme string) net.Addr {
    app.serversMutex.RLock()
    defer app.serversMutex.RUnlock()
    for _, portSrv := range app.servers {
        if portSrv.scheme == scheme {
            if portSrv.listener == nil {
                return nil
            }
            return portSrv.listener.Addr()
        }
    }
    return nil
}

func (app *App) HTTPAddr() net.Addr {
    return app.getListenerAddrByScheme("http")
}

func (app *App) HTTPSAddr() net.Addr {
    return app.getListenerAddrByScheme("https")
}
```

#### 4.2. –§—É–Ω–∫—Ü–∏–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞

**–ù–∞–π–¥–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã:**
- `normaliseCode()` –≤ `mock/handler.go`
- `NormaliseStatucCode()` –≤ `helpers/http.go` (—Å –æ–ø–µ—á–∞—Ç–∫–æ–π!)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤–∏—Ç—å –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é `NormaliseStatusCode()` (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –æ–ø–µ—á–∞—Ç–∫–æ–π).

---

### 5. üü° –û–ø–µ—á–∞—Ç–∫–∏ –≤ –∫–æ–¥–µ

#### 5.1. "filed" –≤–º–µ—Å—Ç–æ "failed"

**–§–∞–π–ª:** `internal/config/config.go`

```go
// –°—Ç—Ä–æ–∫–∞ 33
panic(fmt.Errorf("filed parsing flags: %w", err))  // ‚ùå filed

// –°—Ç—Ä–æ–∫–∞ 37
panic(fmt.Errorf("filed binding flags: %w", err))  // ‚ùå filed

// –°—Ç—Ä–æ–∫–∞ 47
panic(fmt.Errorf("filed to read config file '%s': %w", configPath, err))  // ‚ùå filed

// –°—Ç—Ä–æ–∫–∞ 59
panic(fmt.Errorf("filed parsing config: %w", err))  // ‚ùå filed
```

**–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞:** `failed` (4 –º–µ—Å—Ç–∞)

#### 5.2. "Statuc" –≤–º–µ—Å—Ç–æ "Status"

**–§–∞–π–ª:** `internal/helpers/http.go`

```go
func NormaliseStatucCode(code int) int {  // ‚ùå Statuc
    // ...
}
```

**–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞:** `NormaliseStatusCode`

---

### 6. üü° –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–æ–∫ (Silent failures)

**–§–∞–π–ª:** `internal/handler/proxy/request.go:15`

```go
url, _ := replacer.Replace(req.URL.String())  // ‚ö†Ô∏è –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–∞!
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –∑–∞–º–µ–Ω–∞ URL –Ω–µ —É–¥–∞–ª–∞—Å—å, –æ—à–∏–±–∫–∞ —Ç–µ—Ä—è–µ—Ç—Å—è –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

```go
url, err := replacer.Replace(req.URL.String())
if err != nil {
    return fmt.Errorf("failed to replace URL: %w", err)
}
```

---

### 7. üü° Type assertions –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–§–∞–π–ª:** `internal/handler/cache/middleware.go:110`

```go
return cachedResponse.(*CachedResponse)  // nolint: forcetypeassert
```

**–†–∏—Å–∫:** –ï—Å–ª–∏ –≤ –∫—ç—à –ø–æ–ø–∞–¥—ë—Ç –æ–±—ä–µ–∫—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞, –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç panic.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

```go
if resp, ok := cachedResponse.(*CachedResponse); ok {
    return resp
}
m.logger.Errorf("unexpected type in cache: %T", cachedResponse)
return nil
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ —É–ª—É—á—à–µ–Ω–∏—é

### 8. üîµ Gaps –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

#### 8.1. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

**–ù–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- –û—à–∏–±–∫–∏ HTTP –∫–ª–∏–µ–Ω—Ç–∞ –≤ proxy handler
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ URL —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫—ç—à—É
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ñ–∞–π–ª–æ–≤
- –ó–∞–¥–µ—Ä–∂–∫–∞ —Å –æ—Ç–º–µ–Ω–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ mock handler
- Lua script handler error cases

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å table-driven —Ç–µ—Å—Ç—ã –¥–ª—è error paths:

```go
func TestProxyHandler_HTTPClientErrors(t *testing.T) {
    tests := []struct {
        name          string
        clientError   error
        expectedError string
    }{
        {
            name:          "connection refused",
            clientError:   errors.New("connection refused"),
            expectedError: "failed to proxy request",
        },
        // ... more test cases
    }

    for _, tc := range tests {
        t.Run(tc.name, func(t *testing.T) {
            // test implementation
        })
    }
}
```

#### 8.2. –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç end-to-end —Ç–µ—Å—Ç—ã –¥–ª—è:**
- –ü–æ–ª–Ω–æ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ –≤—Å–µ middleware
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å URL rewriting
- –û–±—Ä–∞–±–æ—Ç–∫–∏ concurrent requests
- Graceful shutdown –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

---

### 9. üîµ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ (TODOs)

**–ù–∞–π–¥–µ–Ω–æ 3 TODO –≤ –∫–æ–¥–µ:**

#### 9.1. Cache Storage Reusage

**–§–∞–π–ª:** `internal/uncors/handler.go:37`

```go
// TODO: Add cache storage reusage
cacheStorage := cache.New(cacheConfig.ExpirationTime, cacheConfig.ClearTime)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫—ç—à –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ä—Ç–∞ ‚Üí –ª–∏—à–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω shared cache storage –¥–ª—è –≤—Å–µ—Ö –ø–æ—Ä—Ç–æ–≤:

```go
type App struct {
    // ...
    sharedCacheStorage *cache.Cache
}

func (app *App) getOrCreateCacheStorage(config *config.CacheConfig) *cache.Cache {
    if app.sharedCacheStorage == nil {
        app.sharedCacheStorage = cache.New(config.ExpirationTime, config.ClearTime)
    }
    return app.sharedCacheStorage
}
```

#### 9.2. Logger Styling

**–§–∞–π–ª:** `internal/uncors/loggers.go:14`

```go
// TODO: Provide a logger with a specific style
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å TODO.

#### 9.3. Context in Shutdown

**–§–∞–π–ª:** `internal/uncors/listen.go`

```go
shutdownError := app.internalShutdown(context.TODO())
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `context.TODO()` –≤–º–µ—Å—Ç–æ proper context.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–µ—Ä–µ–¥–∞—Ç—å context —Å —Ç–∞–π–º–∞—É—Ç–æ–º:

```go
ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)
defer cancel()
shutdownError := app.internalShutdown(ctx)
```

---

### 10. üîµ –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**

| –°–ª–æ–π | –°—Ç—Ä–∞—Ç–µ–≥–∏—è |
|------|-----------|
| Config loading | Panic |
| Handler layer | HTTP error response |
| Middleware | –°–º–µ—à–∞–Ω–Ω–∞—è (panic + return errors) |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:

1. **Config loading:** Panic (acceptable for startup)
2. **Application logic:** Return errors
3. **HTTP handlers:** Convert errors to HTTP responses
4. **Middleware:** Propagate errors, never panic

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### üìà –ë–∏–∑–Ω–µ—Å-–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –ü—Ä–æ–±–ª–µ–º–∞ | –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | ROI |
|----------|-------------------|-------------------|-----|
| **Panic –≤ middleware** | –ü—Ä–æ–∫—Å–∏ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è | Graceful degradation, –ø—Ä–æ–∫—Å–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** | –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏, —Ä–∏—Å–∫ –±–∞–≥–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ | –û–¥–Ω–æ –º–µ—Å—Ç–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ª–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **Silent failures** | –û—à–∏–±–∫–∏ —Ç–µ—Ä—è—é—Ç—Å—è, —Å–ª–æ–∂–Ω–æ –¥–µ–±–∞–∂–∏—Ç—å | –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º, –±—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **–û–ø–µ—á–∞—Ç–∫–∏** | –ù–µ–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥, confusion | –ß–∏—Å—Ç—ã–π –∫–æ–¥, –ª—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê |
| **Cache storage per port** | –õ–∏—à–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | –≠–∫–æ–Ω–æ–º–∏—è RAM, –º–µ–Ω—å—à–µ GC pressure | ‚≠ê‚≠ê‚≠ê |
| **Unsafe pointer** | –†–∏—Å–∫ –ø–æ–ª–æ–º–∫–∏ –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Go | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê |

### üéØ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

**1. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å (Reliability)**
- **–î–æ:** 31 —Ç–æ—á–∫–∞, –≥–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∞–≤–∞—Ä–∏–π–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è
- **–ü–æ—Å–ª–µ:** Graceful degradation, fallback strategies
- **–í—ã–∏–≥—Ä—ã—à:** 95% —Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ runtime panics

**2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Performance)**
- **–î–æ:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ cache instances ‚Üí O(N) –ø–∞–º—è—Ç—å –ø–æ –ø–æ—Ä—Ç–∞–º
- **–ü–æ—Å–ª–µ:** Shared cache ‚Üí O(1) –ø–∞–º—è—Ç—å
- **–í—ã–∏–≥—Ä—ã—à:** ~30-50% —Å–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –≤ multi-port setup

**3. –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å (Testability)**
- **–î–æ:** Panic'–∏ —Ç—Ä—É–¥–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, —Ç—Ä–µ–±—É—é—Ç recover()
- **–ü–æ—Å–ª–µ:** –ü—Ä–æ—Å—Ç—ã–µ error assertions –≤ —Ç–µ—Å—Ç–∞—Ö
- **–í—ã–∏–≥—Ä—ã—à:** +20% –ª–µ–≥–∫–æ—Å—Ç–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

**4. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å (Maintainability)**
- **–î–æ:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ 3+ –º–µ—Å—Ç–∞—Ö
- **–ü–æ—Å–ª–µ:** DRY principle, single source of truth
- **–í—ã–∏–≥—Ä—ã—à:** -40% –≤—Ä–µ–º—è –Ω–∞ –±–∞–≥-—Ñ–∏–∫—Å—ã

**5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Safety)**
- **–î–æ:** Unsafe pointer operations, type assertions –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–ü–æ—Å–ª–µ:** Safe, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–í—ã–∏–≥—Ä—ã—à:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö unsafe –æ–ø–µ—Ä–∞—Ü–∏–π

---

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1-2 –¥–Ω—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ):**

- [ ] **P1.1:** –ó–∞–º–µ–Ω–∏—Ç—å panic –≤ `cache/middleware.go` –Ω–∞ graceful error handling
  - –§–∞–π–ª—ã: `internal/handler/cache/middleware.go:78,87`
  - –û—Ü–µ–Ω–∫–∞: 2 —á–∞—Å–∞
  - Impact: HIGH

- [ ] **P1.2:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `CloseSafe()` ‚Üí `ClosePanic()` –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ–∑ panic
  - –§–∞–π–ª: `internal/helpers/closer.go`
  - –û—Ü–µ–Ω–∫–∞: 30 –º–∏–Ω—É—Ç
  - Impact: MEDIUM

- [ ] **P1.3:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–ø–µ—á–∞—Ç–∫–∏ "filed" ‚Üí "failed" (4 –º–µ—Å—Ç–∞)
  - –§–∞–π–ª: `internal/config/config.go`
  - –û—Ü–µ–Ω–∫–∞: 10 –º–∏–Ω—É—Ç
  - Impact: LOW (Code quality)

- [ ] **P1.4:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–ø–µ—á–∞—Ç–∫—É "Statuc" ‚Üí "Status"
  - –§–∞–π–ª: `internal/helpers/http.go`
  - –û—Ü–µ–Ω–∫–∞: 10 –º–∏–Ω—É—Ç
  - Impact: LOW (Code quality)

### –§–∞–∑–∞ 2: –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (2-3 –¥–Ω—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:**

- [ ] **P2.1:** –ò–∑–≤–ª–µ—á—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ `HTTPAddr()` –∏ `HTTPSAddr()`
  - –§–∞–π–ª: `internal/uncors/app.go`
  - –û—Ü–µ–Ω–∫–∞: 1 —á–∞—Å
  - Impact: MEDIUM

- [ ] **P2.2:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏—é cache keys
  - –§–∞–π–ª: `internal/handler/cache/middleware.go:105`
  - –û—Ü–µ–Ω–∫–∞: 1 —á–∞—Å
  - Impact: MEDIUM

- [ ] **P2.3:** –ó–∞–º–µ–Ω–∏—Ç—å `unsafe.Pointer` –Ω–∞ `reflect` –≤ `AssertIsDefined`
  - –§–∞–π–ª: `internal/helpers/asset.go`
  - –û—Ü–µ–Ω–∫–∞: 30 –º–∏–Ω—É—Ç
  - Impact: MEDIUM

- [ ] **P2.4:** –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ URL replacement
  - –§–∞–π–ª: `internal/handler/proxy/request.go:15`
  - –û—Ü–µ–Ω–∫–∞: 30 –º–∏–Ω—É—Ç
  - Impact: MEDIUM

- [ ] **P2.5:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å type assertion –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
  - –§–∞–π–ª: `internal/handler/cache/middleware.go:110`
  - –û—Ü–µ–Ω–∫–∞: 20 –º–∏–Ω—É—Ç
  - Impact: LOW

### –§–∞–∑–∞ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (3-5 –¥–Ω–µ–π)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:**

- [ ] **P3.1:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å cache storage reusage (TODO)
  - –§–∞–π–ª: `internal/uncors/handler.go:37`
  - –û—Ü–µ–Ω–∫–∞: 2 —á–∞—Å–∞
  - Impact: MEDIUM (Performance)

- [ ] **P3.2:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å error handling –≤ `app.Restart()`
  - –§–∞–π–ª: `internal/uncors/app.go:81`
  - –û—Ü–µ–Ω–∫–∞: 1 —á–∞—Å
  - Impact: MEDIUM

- [ ] **P3.3:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å context.TODO() –≤ shutdown
  - –§–∞–π–ª: `internal/uncors/listen.go`
  - –û—Ü–µ–Ω–∫–∞: 30 –º–∏–Ω—É—Ç
  - Impact: LOW

- [ ] **P3.4:** –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è error cases
  - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
  - –û—Ü–µ–Ω–∫–∞: 1 –¥–µ–Ω—å
  - Impact: HIGH (Quality)

- [ ] **P3.5:** –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
  - –ù–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
  - –û—Ü–µ–Ω–∫–∞: 1-2 –¥–Ω—è
  - Impact: HIGH (Quality)

### –§–∞–∑–∞ 4: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4:**

- [ ] **P4.1:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
  - –í–µ—Å—å –ø—Ä–æ–µ–∫—Ç
  - –û—Ü–µ–Ω–∫–∞: 3-5 –¥–Ω–µ–π
  - Impact: HIGH (Architecture)

- [ ] **P4.2:** –î–æ–±–∞–≤–∏—Ç—å structured logging
  - `internal/infra/logger.go`
  - –û—Ü–µ–Ω–∫–∞: 1 –¥–µ–Ω—å
  - Impact: MEDIUM

- [ ] **P4.3:** –î–æ–±–∞–≤–∏—Ç—å metrics/observability
  - –ù–æ–≤—ã–π –ø–∞–∫–µ—Ç `internal/metrics`
  - –û—Ü–µ–Ω–∫–∞: 2-3 –¥–Ω—è
  - Impact: MEDIUM

- [ ] **P4.4:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å error handling strategy
  - –ù–æ–≤—ã–π `docs/error-handling.md`
  - –û—Ü–µ–Ω–∫–∞: 1 –¥–µ–Ω—å
  - Impact: LOW (Documentation)

---

## –û—Ü–µ–Ω–∫–∞ –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

| –§–∞–∑–∞ | –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|------|---------------|-------------|
| –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | 1-2 –¥–Ω—è | üî¥ –í—ã—Å–æ–∫–∞—è |
| –§–∞–∑–∞ 2: –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è | 2-3 –¥–Ω—è | üü° –°—Ä–µ–¥–Ω—è—è |
| –§–∞–∑–∞ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | 3-5 –¥–Ω–µ–π | üü¢ –ù–∏–∑–∫–∞—è |
| –§–∞–∑–∞ 4: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è | 1-2 –Ω–µ–¥–µ–ª–∏ | üîµ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 2.5-4 –Ω–µ–¥–µ–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ refactoring

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MVP (—Ñ–∞–∑—ã 1-2):** 3-5 –¥–Ω–µ–π

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚úÖ Panic calls: **31**
- ‚úÖ Typos: **5+**
- ‚úÖ Code duplication: **3+ locations**
- ‚úÖ Unsafe operations: **1**
- ‚úÖ Silent failures: **2+**
- ‚úÖ Test coverage: **~70%** (–±–µ–∑ error paths)

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- üéØ Panic calls: **< 5** (—Ç–æ–ª—å–∫–æ –≤ startup/config)
- üéØ Typos: **0**
- üéØ Code duplication: **0**
- üéØ Unsafe operations: **0**
- üéØ Silent failures: **0**
- üéØ Test coverage: **> 85%** (—Å error paths)

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç **UNCORS** –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **—Ö–æ—Ä–æ—à—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –∏ **solid engineering practices**, –Ω–æ –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π, —Ç—Ä–µ–±—É—é—â–∏—Ö –≤–Ω–∏–º–∞–Ω–∏—è:

**–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `panic()` –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ö—Ä—É–ø–∫–∏–º.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å **–§–∞–∑—ã 1** (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è) –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –∑–∞–π–º—ë—Ç 1-2 –¥–Ω—è –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–∫—Å–∏.

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è —Ü–µ–ª—å:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º, –ø—Ä–æ–µ–∫—Ç –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –¥–æ—Å—Ç–∏—á—å –æ—Ü–µ–Ω–∫–∏ **8.5-9/10** –ø–æ –∫–∞—á–µ—Å—Ç–≤—É –∫–æ–¥–∞.

---

**–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞:** Claude Code (AI Assistant)
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞:** Static code analysis, AST parsing, golangci-lint, test analysis
**–ö–æ–Ω—Ç–∞–∫—Ç:** –î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –æ—Ç—á—ë—Ç—É –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞
