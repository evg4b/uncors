name: "CORS Headers Replacement"
description: "Test that CORS headers are properly added/replaced"

backend:
  endpoints:
    - path: /api/data
      method: GET
      response:
        status: 200
        headers:
          Content-Type: application/json
          Access-Control-Allow-Origin: https://example.com
          Access-Control-Allow-Methods: GET
        body: '{"data":"test"}'

uncors:
  http-port: 3001
  mappings:
    - from: http://test.local:3001
      to: "{{backend}}"

tests:
  - name: "CORS headers are replaced"
    requests:
      - method: GET
        path: /api/data
        headers:
          Origin: http://test.local:3001
    expected:
      status: 200
      headers:
        Access-Control-Allow-Origin: http://test.local:3001
        Access-Control-Allow-Methods: GET, PUT, POST, HEAD, TRACE, DELETE, PATCH, COPY, HEAD, LINK, OPTIONS
        Access-Control-Allow-Credentials: "true"
